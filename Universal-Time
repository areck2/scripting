-- Setup GUI Elements
local Gui = Instance.new("ScreenGui")
local BackGround = Instance.new("Frame")
local XBox = Instance.new("TextBox")
local YBox = Instance.new("TextBox")
local ZBox = Instance.new("TextBox")
local ExitGuiButton = Instance.new("TextButton")
local TeleportButton = Instance.new("TextButton")

Gui.Name = "TeleportGui"
Gui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
Gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
Gui.ResetOnSpawn = false

BackGround.Name = "BackGround"
BackGround.Parent = Gui
BackGround.Active = true
BackGround.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
BackGround.BorderColor3 = Color3.fromRGB(27, 42, 53)
BackGround.BorderSizePixel = 0
BackGround.Position = UDim2.new(0.414194375, -35, 0.447971016, -5)
BackGround.Size = UDim2.new(0, 220, 0, 100)
BackGround.Active = true
BackGround.Draggable = true

local function CreateCoordBox(name, placeholder, position)
    local box = Instance.new("TextBox")
    box.Name = name
    box.Parent = BackGround
    box.BackgroundColor3 = Color3.fromRGB(93, 93, 93)
    box.BorderColor3 = Color3.fromRGB(38, 38, 38)
    box.BorderSizePixel = 3
    box.Position = position
    box.Size = UDim2.new(0, 60, 0, 30)
    box.ClearTextOnFocus = false
    box.Font = Enum.Font.SourceSans
    box.PlaceholderText = placeholder
    box.Text = ""
    box.TextColor3 = Color3.fromRGB(255, 255, 255)
    box.TextScaled = true
    box.TextSize = 14.000
    box.TextWrapped = true
    return box
end

XBox = CreateCoordBox("XBox", "X", UDim2.new(0.05, 0, 0.15, 0))
YBox = CreateCoordBox("YBox", "Y", UDim2.new(0.36, 0, 0.15, 0))
ZBox = CreateCoordBox("ZBox", "Z", UDim2.new(0.67, 0, 0.15, 0))

ExitGuiButton.Name = "ExitGuiButton"
ExitGuiButton.Parent = BackGround
ExitGuiButton.BackgroundColor3 = Color3.fromRGB(255, 0, 4)
ExitGuiButton.BorderColor3 = Color3.fromRGB(50, 50, 50)
ExitGuiButton.BorderSizePixel = 3
ExitGuiButton.Position = UDim2.new(0.91, 0, -0.21, 0)
ExitGuiButton.Size = UDim2.new(0, 20, 0, 20)
ExitGuiButton.Font = Enum.Font.SourceSans
ExitGuiButton.Text = "X"
ExitGuiButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExitGuiButton.TextSize = 14.000
ExitGuiButton.TextWrapped = true

TeleportButton.Name = "TeleportButton"
TeleportButton.Parent = BackGround
TeleportButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
TeleportButton.BorderColor3 = Color3.fromRGB(50, 50, 50)
TeleportButton.BorderSizePixel = 3
TeleportButton.Position = UDim2.new(0.25, 0, 0.65, 0)
TeleportButton.Size = UDim2.new(0, 110, 0, 30)
TeleportButton.Font = Enum.Font.SourceSans
TeleportButton.Text = "Teleport"
TeleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportButton.TextSize = 18.000

-- Hide/Show Menu
local UIS = game:GetService("UserInputService")
local guiVisible = true

UIS.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.Insert then
        guiVisible = not guiVisible
        Gui.Enabled = guiVisible
    end
end)

-- Exit Button
ExitGuiButton.MouseButton1Click:Connect(function()
    Gui:Destroy()
end)

-- Teleport Function using TweenService
local TweenService = game:GetService("TweenService")

local function DoTeleport()
    local x, y, z = tonumber(XBox.Text), tonumber(YBox.Text), tonumber(ZBox.Text)
    if x and y and z then
        local targetPosition = Vector3.new(x, y, z) + Vector3.new(0, 10, 0) -- Offset by 10 studs on the Y-axis
        local player = game.Players.LocalPlayer
        local character = player.Character
        if character then
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                -- Define TweenInfo
                local tweenInfo = TweenInfo.new(
                    2, -- Duration (in seconds)
                    Enum.EasingStyle.Linear, -- Easing style
                    Enum.EasingDirection.Out, -- Easing direction
                    0, -- Repeat count (0 means no repeat)
                    false, -- Reverses (tween will not reverse)
                    0 -- Delay time (in seconds)
                )
                
                -- Define TargetValue
                local targetValue = {
                    CFrame = CFrame.new(targetPosition)
                }
                
                -- Create and play the tween
                local tween = TweenService:Create(humanoidRootPart, tweenInfo, targetValue)
                tween:Play()
            else
                print("HumanoidRootPart not found. Cannot teleport.")
            end
        else
            print("Character not found. Cannot teleport.")
        end
    else
        print("Invalid coordinates. Please enter numbers in all fields.")
    end
end

-- Teleport Button
TeleportButton.MouseButton1Click:Connect(DoTeleport)

-- Teleport on Enter key
XBox.FocusLost:Connect(function(enterPressed) if enterPressed then DoTeleport() end end)
YBox.FocusLost:Connect(function(enterPressed) if enterPressed then DoTeleport() end end)
ZBox.FocusLost:Connect(function(enterPressed) if enterPressed then DoTeleport() end end)





-- Create a new button for teleporting to the quest giver
local tpQuestGiverButton = Instance.new("TextButton")
tpQuestGiverButton.Name = "TpQuestGiverButton"
tpQuestGiverButton.Parent = BackGround -- Assuming BackGround is the Frame that contains your other GUI elements

-- Set the button's appearance
tpQuestGiverButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Green color for visibility
tpQuestGiverButton.BorderColor3 = Color3.fromRGB(50, 50, 50)
tpQuestGiverButton.BorderSizePixel = 3
tpQuestGiverButton.Position = UDim2.new(0.75, 0, 0.8, 0) -- Position it appropriately within your GUI layout
tpQuestGiverButton.Size = UDim2.new(0, 150, 0, 40) -- Size according to your design
tpQuestGiverButton.Font = Enum.Font.SourceSans
tpQuestGiverButton.Text = "TP to Quest Giver"
tpQuestGiverButton.TextColor3 = Color3.fromRGB(255, 255, 255)
tpQuestGiverButton.TextSize = 16

local function TeleportToQuestGiver()
    local targetPosition = Vector3.new(2057.1005859375, 973.9896240234375, 322.25543212890625)
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character then
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoidRootPart then
            -- Define TweenInfo
            local tweenInfo = TweenInfo.new(
                2, -- Duration (in seconds)
                Enum.EasingStyle.Linear,
                Enum.EasingDirection.Out,
                0,
                false,
                0
            )
            
            -- Define TargetValue
            local targetValue = {
                CFrame = CFrame.new(targetPosition)
            }
            
            -- Create and play the tween
            local tween = TweenService:Create(humanoidRootPart, tweenInfo, targetValue)
            tween:Play()
        else
            print("HumanoidRootPart not found. Cannot teleport.")
        end
    else
        print("Character not found. Cannot teleport.")
    end
end


tpQuestGiverButton.MouseButton1Click:Connect(TeleportToQuestGiver)


-- IMPORTANT
-- swords for the quest are located in workspace under Sword1 Sword2 and Sword3. The proximity prompts are stored inside SwordX Root Proximity Prompt (X meaning the sword number.)
